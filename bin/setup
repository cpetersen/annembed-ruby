#!/usr/bin/env bash
set -euo pipefail
IFS=$'\n\t'
set -vx

# Install Ruby dependencies
bundle install

# Check for Rust installation
if ! command -v rustc &> /dev/null; then
    echo "Rust is not installed. Please install Rust from https://rustup.rs/"
    exit 1
fi

echo "Rust version:"
rustc --version

# Install additional Rust components if needed
rustup component add rustfmt clippy

# Compile the extension
bundle exec rake compile

echo "Setup complete! You can now run tests with: bundle exec rake test"